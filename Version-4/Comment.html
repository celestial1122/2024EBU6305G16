<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Audience</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background-image: url('https://s2.loli.net/2024/04/23/P51jTBOLzXUDAwQ.jpg');
        background-size: cover; /* 默认为覆盖整个屏幕 */
        background-position: center;
        margin: 0;
        overflow-y: auto;
        margin-top: 40px;
    }

    /* 小屏幕设备的媒体查询 */
    @media only screen and (max-width: 768px) {
        body {
            /* 当屏幕尺寸小于768px时，使用不同的背景图 */
            background-image: url('https://s2.loli.net/2024/04/23/OT9hNAozRvr1HSk.png');
            background-size: cover; /* 或者contain，根据你的需求调整 */
            background-position: center;
            margin-top: 40px;
        }
    }

    nav {
        background-color: #000000;
        color: #ffffff;
        padding: 0;
        text-align: center;
        font-size: 130%;
        height: 50px; /* 控制 nav 的初始高度 */
        position: fixed;
        width: 100%;
        top: 0;
        left: 0;
        z-index: 1000;
    }
    nav a {
        color: #ffffff;
        text-decoration: none;
        margin: 0 10px;
        display: inline-block;
        font-weight: 700;
        text-align: center;
        margin-top: 1%;
    }
    #hamburger-menu {
        display: none;
        font-size: 25px; /* 汉堡式图标的大小 */
        cursor: pointer;
        position: absolute; /* 使用绝对定位 */
        right: 20px; /* 距离右边界20px */
        top: 5px; /* 距离顶部10px */
    }

    #comments-wrapper {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        padding: 0 20px;
    }
    #comments-container {
        width: 100%;
        max-width: 700px;
        height: 330px;
        padding: 20px;
        background-color: rgb(255, 255, 255,0.6);
        border-radius: 10px;
        position: relative;
    }
    #comment-title {
        text-align: center; /* 让标题居中显示 */
        color: rgb(55, 123, 240); /* 设置标题颜色为蓝色 */
        font-size: 23px;
        letter-spacing: -0.5px; /* 调整词间距为小一点 */
        font-weight: bold; /* 将标题加粗 */
    }   
    .score-select {
        width: 100%;
        max-width: 100px;
        background-color: rgba(109, 105, 105, 0.3);
        border: none; /* 去掉边框 */
        border-radius: 2px; /* 设置圆角 */
    }
    #comment {
        width: 100%;
        max-width: 100%;
        min-height: 160px;
        background-color: rgba(109, 105, 105, 0.3);
        border: none; /* 去掉边框 */
        border-radius: 5px; /* 设置圆角 */
    }
    

    /* 响应式样式 */
    @media only screen and (max-width: 600px) {
        #comments-container {
            width: 100%;
            max-width: none;
        }
        .navbar a {
            padding: 14px 10px;
        }
    }
    
    /* 居中按钮 */
    button[type="submit"] {
        height: 35px;
        width: 70px;
        display: block;
        margin: 0 auto;
        margin-top: 15px;
        background-color: rgb(55, 123, 240);
        border: none;
        border-radius: 4px;
    }
    #submit-btn {
    color: white;
    }
    .custom-alert-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 9999;
    }
    .custom-alert {
        background-color: white;
        padding: 20px;
        border-radius: 5px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
    }
    .custom-alert p {
        margin: 0;
        padding: 10px 0;
    }
    .custom-alert button {
        background-color: #4f379f;
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
    }

    .history-comments {
        position: absolute;
        bottom: 10px;
        right: 10px;
        font-size: 15px;
        text-decoration: underline;
        color: rgb(36, 46, 125);
    }

    .history-comments:hover {
        color: rgb(123, 122, 199);
    }

    /* 小屏幕设备的媒体查询 */
    @media only screen and (max-width: 768px) {
        button[type="submit"] {
            width: 55px; /* 缩小按钮宽度 */
            height: 35px; /* 缩小按钮高度 */
            padding: 5px;
            font-size: 0.9rem; /* 缩小字体大小 */
            margin: 10px auto; /* 居中按钮，并在上下各留出10px空间 */
            background-color: rgb(55, 123, 240); /* 设置按钮背景颜色 */
            display: block; /* 使margin:auto起作用 */
            border: none;
            border-radius: 3px;
        }

        .history-comments {
            font-size: 0.9rem; /* 缩小链接的字体大小 */
            bottom: 5px; /* 提升链接，距离底部留出一些空间 */
        }

        #comments-container {
            padding-bottom: 40px; /* 增加底部内边距以适应按钮和链接 */
        }
        #hamburger-menu {
            display: block; /* 在小屏幕上显示汉堡式菜单 */
        }

        nav a {
            display: none; /* 隐藏其他菜单项 */
        }

        /* 当菜单打开时显示菜单项 */
        nav.active a {
            display: block; /* 显示链接 */
            width: 100%; /* 链接宽度撑满 */
            padding: 10px 0; /* 添加适当的内边距 */
            text-align: center; /* 文本居中 */
            color: #ffffff;
            background-color: transparent; /* 去除链接背景 */
            text-decoration: none;
            font-size: 18px; /* 字体大小适中 */
        }

        nav.active {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: auto; /* 只需足够的高度以容纳所有链接 */
            background-color: #000; /* 维持背景色 */
            display: flex;
            flex-direction: column; /* 垂直布局 */
            justify-content: flex-start; /* 从顶部开始排列 */
            padding: 35px 0 10px; /* 顶部留出足够空间，底部适当间隔 */
            box-sizing: border-box; /* 包括内边距在宽度内 */
        }
    }

    /* 针对非常小屏幕设备的媒体查询 */
    @media only screen and (max-width: 480px) {
        button[type="submit"] {
            width: 50px; /* 在非常小的屏幕上进一步缩小按钮宽度 */
            height: 30px; /* 在非常小的屏幕上缩小按钮高度 */
            font-size: 0.7rem; /* 在非常小的屏幕上缩小字体大小 */
            margin: 10px auto; /* 居中按钮 */
            background-color: rgb(55, 123, 240); /* 设置按钮背景颜色 */
            display: block; /* 使margin:auto起作用 */
            border: none;
            border-radius: 2px;
        }

        .history-comments {
            font-size: 0.8rem; /* 在非常小的屏幕上进一步缩小字体大小 */
            bottom: 5px; /* 提升链接，距离底部留出一些空间 */
        }
        #hamburger-menu {
            display: block; /* 在小屏幕上显示汉堡式菜单 */
        }

        nav a {
            display: none; /* 隐藏其他菜单项 */
        }

        /* 当菜单打开时显示菜单项 */
        nav.active a {
            display: block; /* 显示链接 */
            width: 100%; /* 链接宽度撑满 */
            padding: 8px 0; /* 添加适当的内边距 */
            text-align: center; /* 文本居中 */
            color: #ffffff;
            background-color: transparent; /* 去除链接背景 */
            text-decoration: none;
            font-size: 16px; /* 字体大小适中 */
        }

        nav.active {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: auto; /* 只需足够的高度以容纳所有链接 */
            background-color: #000; /* 维持背景色 */
            display: flex;
            flex-direction: column; /* 垂直布局 */
            justify-content: flex-start; /* 从顶部开始排列 */
            padding: 35px 0 8px; /* 顶部留出足够空间，底部适当间隔 */
            box-sizing: border-box; /* 包括内边距在宽度内 */
        }
    }

</style>
</head>


<body>

    <!-- 菜单栏 -->
    <nav>
        <div id="hamburger-menu" onclick="toggleMenu()">☰</div> <!-- 汉堡式图标 -->
        <a href="homepage.html">Homepage</a>
        <a href="example.html">Story Summary</a>
        <a href="#">Character Role</a>
        <a href="#">Behind The Scenes</a>
        <a href="Comment.html">Comments</a>
    </nav>

    <div id="comments-wrapper">
        <div id="comments-container">
            <p id="comment-title">Write a comment, share your thought !</p>
            <form id="comment-form">
                <div>
                    <label for="score">Score:</label>
                    <select id="score" class="score-select">
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                    </select>
                </div>
                <div>
                    <label for="comment">Comment: </label> 
                    <textarea id="comment"></textarea>
                    <!--  <textarea id="comment" placeholder="Please enter comment"></textarea> -->
                </div>
                <div>
                    <button type="submit" id="submit-btn">Submit</button>
                </div>
            </form>
            <div class="history-comments">
                <a href="comments_history.html" style="text-decoration: none; color: inherit;">History Comments</a>
            </div>
        </div>
    </div>

    <!-- 自定义提示框 -->
    <div class="custom-alert-overlay" id="custom-alert-overlay" style="display: none;">
        <div class="custom-alert">
            <p id="custom-alert-text">Comment cannot be empty.</p>
            <button id="custom-alert-close">Close</button>
            <style>
                /* 新增的 CSS 用于水平居中按钮 */
                .custom-alert button {
                    display: block;
                    margin: 0 auto;
                }
            </style>
        </div>
    </div>

    <!-- 自定义提示框 -->
    <div class="custom-alert-overlay" id="comment-completed-overlay" style="display: none;">
        <div class="custom-alert">
            <p>Comment completed!</p>
            <button id="comment-completed-close">Close</button>
            <style>
                /* 新增的 CSS 用于水平居中按钮 */
                .custom-alert button {
                    display: block;
                    margin: 0 auto;
                }
            </style>
        </div>
    </div>

    <div class="custom-alert-overlay" id="custom-alert-overlay" style="display: none;">
        <div class="custom-alert">
            <p>Comment cannot be empty.</p>
            <button id="custom-alert-close">Close</button>
            <style>
                /* 新增的 CSS 用于水平居中按钮 */
                .custom-alert button {
                    display: block;
                    margin: 0 auto;
                }
            </style>
        </div>
    </div>    

    <div class="bottom-image">
        <img src="https://s2.loli.net/2024/04/06/VIkOrExDlTMoKY5.png" alt="contact with the team" style="width:100%; display:block;">
    </div>

    <script>
        document.getElementById('comment-form').addEventListener('submit', function(event) {
            event.preventDefault(); // 阻止表单提交

            var commentContent = document.getElementById('comment').value.trim();
            var scoreValue = document.getElementById('score').value;

            if (commentContent !== '') {
                // 获取当前时间并格式化
                var now = new Date();
                var formattedDate = now.getFullYear() + '.' + (now.getMonth() + 1) + '.' + now.getDate() + ' ' + now.getHours() + ':' + now.getMinutes().toString().padStart(2, '0') + ':' + now.getSeconds().toString().padStart(2, '0');

                var commentsList = JSON.parse(localStorage.getItem('commentsList')) || [];
                commentsList.push({
                    score: scoreValue,
                    comment: commentContent,
                    date: formattedDate  // 使用格式化的日期
                });

                localStorage.setItem('commentsList', JSON.stringify(commentsList));

                showCommentCompletedAlert(); // 显示评论完成提示框
            } else {
                showCustomAlert(); // 显示评论不能为空的提示框
            }
        });
        document.getElementById('comment-completed-close').addEventListener('click', function() {
            // 关闭评论完成提示框并跳转到历史评论页面
            window.location.href = 'comments_history.html';
        });



        function saveCommentToLocalStorage(comment) {
            var commentsList = localStorage.getItem('commentsList') ? JSON.parse(localStorage.getItem('commentsList')) : [];
            var currentDateTime = new Date().toLocaleString(); // 获取当前的日期和时间
            comment.date = currentDateTime; // 给评论对象添加一个时间戳属性
            commentsList.push(comment);
            localStorage.setItem('commentsList', JSON.stringify(commentsList));
        }


        function showCommentCompletedAlert() {
            document.getElementById('comment-completed-overlay').style.display = 'flex';
        }

        document.getElementById('comment-completed-close').addEventListener('click', function() {
            hideCommentCompletedAlert(); // 关闭评论完成提示框
        });

        function showCommentCompletedAlert() {
            document.getElementById('comment-completed-overlay').style.display = 'flex';
        }

        function hideCommentCompletedAlert() {
            document.getElementById('comment-completed-overlay').style.display = 'none';
        }

        document.getElementById('custom-alert-close').addEventListener('click', function() {
            hideCustomAlert(); // 关闭自定义提示框
        });

        function showCustomAlert() {
            document.getElementById('custom-alert-overlay').style.display = 'flex';
        }

        function hideCustomAlert() {
            document.getElementById('custom-alert-overlay').style.display = 'none';
        }

        function toggleMenu() {
            var nav = document.querySelector('nav');
            nav.classList.toggle('active');
        }
    </script>

</body>

</html>